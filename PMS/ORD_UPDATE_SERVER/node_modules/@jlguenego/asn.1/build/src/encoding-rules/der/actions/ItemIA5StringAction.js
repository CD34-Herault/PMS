"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ItemIA5StringAction = void 0;
const Action_1 = require("../../../Action");
const ActionType_1 = require("../../../actions/ActionType");
class ItemIA5StringAction extends Action_1.Action {
    constructor() {
        super(...arguments);
        this.type = ActionType_1.ActionType.ITEM_IA5STRING;
    }
    transform(state) {
        const context = state.context;
        const length = state.dataview.getUint8(state.index);
        context.index++;
        state.index++;
        const buffer = state.dataview.buffer.slice(state.index, state.index + length);
        const value = Buffer.from(buffer).toString('ascii');
        const key = Object.keys(context.sequence).length;
        context.sequence[key] = value;
        context.index += length;
        state.index += length;
        if (context.index === context.length) {
            state.nextAction = ActionType_1.ActionType.INIT;
            return;
        }
        state.nextAction = ActionType_1.ActionType.ITEM;
    }
}
exports.ItemIA5StringAction = ItemIA5StringAction;
//# sourceMappingURL=ItemIA5StringAction.js.map